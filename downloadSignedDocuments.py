documentList = [
  {
    "NewEditor": "X",
    "id": 4527028120715264,
    "patientId": 5550826613768192,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ce80dao",
    "patientName": "Maria Márcia Pianezzer",
    "fileName": "0f978816-88a2-47eb-a811-43e6733df2a6.document"
  },
  {
    "NewEditor": "X",
    "id": 4547987437387776,
    "patientId": 5327774779047936,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Deirmb8",
    "patientName": "Margarida Feill de Meira",
    "fileName": "b0fca9c0-5d0b-4bb0-930e-ee4e778a0c40.document"
  },
  {
    "NewEditor": "X",
    "id": 4553862677921792,
    "patientId": 4826229568307200,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Cel6i3g",
    "patientName": "Cristiane Neppel",
    "fileName": "82dc544a-5e14-4a6f-b249-30924d4c7059.document"
  },
  {
    "NewEditor": "X",
    "id": 4624491286495232,
    "patientId": 6124930137980928,
    "documentName": "Termo Depilação a Laser ",
    "eSignatureId": "De33utg",
    "patientName": "Cristina Silva Santos",
    "fileName": "52436cff-823d-4c70-9775-3b3d3b2c6702.document"
  },
  {
    "NewEditor": "X",
    "id": 4646361169788928,
    "patientId": 6109762509209600,
    "documentName": "Termo de Consentimento Toxína Botulínica",
    "eSignatureId": "Cekk7fo",
    "patientName": "Simone Maria Marcelino",
    "fileName": "057f238d-a87d-4c4b-b3b7-630e9445f138.document"
  },
  {
    "NewEditor": "X",
    "id": 4660136241397760,
    "patientId": 6648770054193152,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ce7cr08",
    "patientName": "Isadora Santos Mattos",
    "fileName": "e37b31a7-bf90-403d-b6b9-e7019b0fb58f.document"
  },
  {
    "NewEditor": "X",
    "id": 4660817905975296,
    "patientId": 6124930137980928,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Deumst",
    "patientName": "Cristina Silva Santos",
    "fileName": "4284c5dc-e996-4208-8a74-c26f43963e30.document"
  },
  {
    "NewEditor": "X",
    "id": 4696246178938880,
    "patientId": 6539100077555712,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ceot19o",
    "patientName": "Bruna Gasparetto",
    "fileName": "2b48fc41-b7f4-463f-b655-87f9334e4638.document"
  },
  {
    "NewEditor": "X",
    "id": 4709457594810368,
    "patientId": 6579056506437632,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ceqlphg",
    "patientName": "Janaína Maristela Miranda de Araújo",
    "fileName": "19f6f39e-1db0-4408-aab2-da5b973c490e.document"
  },
  {
    "NewEditor": "X",
    "id": 4834226583502848,
    "patientId": 5986429678780416,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Cejikh",
    "patientName": "Gabriele Maria Freiberger",
    "fileName": "c0f0483b-89a5-4ad0-9a4a-022995e95655.document"
  },
  {
    "NewEditor": "X",
    "id": 4881523664355328,
    "patientId": 5768211416612864,
    "documentName": "Termo de consentimento funcionários",
    "eSignatureId": "Beg69io",
    "patientName": "Alexandra de Souza Braun",
    "fileName": "3b48c619-3761-4572-a30a-b553ef4eece3.document"
  },
  {
    "NewEditor": "X",
    "id": 4919037020995584,
    "patientId": 5905912053497856,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Cel8sb8",
    "patientName": "Lidia Gabriela Margreiter",
    "fileName": "25f92f7a-ed14-495d-8582-25615b10ab45.document"
  },
  {
    "NewEditor": "X",
    "id": 4931651964895232,
    "patientId": 5278644268564480,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Cei54v",
    "patientName": "Suelen Correia Farias",
    "fileName": "88988987-c960-4cbf-9a45-683257e59a0d.document"
  },
  {
    "NewEditor": "X",
    "id": 4986221311164416,
    "patientId": 5682542262484992,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ce0k5vg",
    "patientName": "Tayna Ferreira dos Anjos",
    "fileName": "36e084cf-efc1-4ee1-8474-e7e237d48fc1.document"
  },
  {
    "NewEditor": "X",
    "id": 4990192150249472,
    "patientId": 5979896920276992,
    "documentName": "Termo de consentimento Toxína Botulínica",
    "eSignatureId": "Becc9j8",
    "patientName": "Bruna Guckert da Silva de Brito",
    "fileName": "abd11a17-a4ef-4787-a80b-2a970b24192e.document"
  },
  {
    "NewEditor": "X",
    "id": 5003009480589312,
    "patientId": 4535347076005888,
    "documentName": "Termo Depilação a Laser ",
    "eSignatureId": "Dehs46g",
    "patientName": "Márcia Walz",
    "fileName": "b60ce765-b5fc-40c0-9ce7-2abfa6e79bac.document"
  },
  {
    "NewEditor": "X",
    "id": 5067421509877760,
    "patientId": 5904871471054848,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ce2vpuo",
    "patientName": "Dorandina Celone Gross Karpinski",
    "fileName": "b14dfbb6-824f-46a4-84b8-fcc238a173a9.document"
  },
  {
    "NewEditor": "X",
    "id": 5120566512451584,
    "patientId": 5405156077862912,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ce6am3o",
    "patientName": "Bruna Venturi",
    "fileName": "49f5d4da-64ce-4a98-aaac-17abc91396a8.document"
  },
  {
    "NewEditor": "X",
    "id": 5136859452014592,
    "patientId": 4535347076005888,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "De56m7",
    "patientName": "Márcia Walz",
    "fileName": "ead60d46-0cdf-4429-98b0-54a2baf4696e.document"
  },
  {
    "NewEditor": "X",
    "id": 5174610895437824,
    "patientId": 6070419332923392,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Cetm1i",
    "patientName": "Simone Michalski Signorin",
    "fileName": "3bc8b6bc-ab72-43d5-bd16-280486e4e162.document"
  },
  {
    "NewEditor": "X",
    "id": 5267124335804416,
    "patientId": 6506946621997056,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Cean3h8",
    "patientName": "Chayene Larissa Maximiliano Ferreira",
    "fileName": "7553a4a0-64e7-4a9a-91ba-c7abc9e79f29.document"
  },
  {
    "NewEditor": "X",
    "id": 5275069018669056,
    "patientId": 6071896189304832,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Cenrc4g",
    "patientName": "Vanessa Luz Sikorski",
    "fileName": "46cbf07e-76f0-4622-925c-5772b6e58d48.document"
  },
  {
    "NewEditor": "X",
    "id": 5282099481673728,
    "patientId": 4850708231094272,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ce9cimg",
    "patientName": "Alexsandra Christine Anton",
    "fileName": "00641fed-828e-494f-b99d-29bad3dfdc09.document"
  },
  {
    "NewEditor": "X",
    "id": 5283832081547264,
    "patientId": 6519107603791872,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ce4i16",
    "patientName": "Adriano Venturin",
    "fileName": "b0eb2588-f4c9-410d-813e-c64dac6db9a4.document"
  },
  {
    "NewEditor": "X",
    "id": 5291389558849536,
    "patientId": 6326122090725376,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ce6aleg",
    "patientName": "Brenda Eduarda Campestrini Cobalchini",
    "fileName": "85b2e21d-8dc6-490b-b441-856ac9adcb7a.document"
  },
  {
    "NewEditor": "X",
    "id": 5309155527491584,
    "patientId": 4878094087618560,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ce7v94o",
    "patientName": "Gabrielle Thaís Schulze Besen",
    "fileName": "878e58c7-2c06-463b-8811-441539ce9f48.document"
  },
  {
    "NewEditor": "X",
    "id": 5358190124728320,
    "patientId": 4630617777635328,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Cer9rug",
    "patientName": "Juliana Aparecida Floriano Souza",
    "fileName": "c29fdc2b-a7ef-423b-aded-b80f1124e489.document"
  },
  {
    "NewEditor": "X",
    "id": 5374282280861696,
    "patientId": 4841882290618368,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ce0eje8",
    "patientName": "João Menechenko",
    "fileName": "366e9a2f-99bb-4075-a62e-f84e84596b4b.document"
  },
  {
    "NewEditor": "X",
    "id": 5431248138403840,
    "patientId": 5845157626380288,
    "documentName": "Termo de consentimento funcionários",
    "eSignatureId": "Bep0qqo",
    "patientName": "Andressa Nadine",
    "fileName": "b02023fe-77ff-4867-865d-dfba749589b2.document"
  },
  {
    "NewEditor": "X",
    "id": 5451287468834816,
    "patientId": 4975362455240704,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "De2uueo",
    "patientName": "Camila Goldacker",
    "fileName": "672b2ff9-dc2f-4f86-aa63-9201736a69d8.document"
  },
  {
    "NewEditor": "X",
    "id": 5454943486345216,
    "patientId": 6291235300311040,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Celb9uo",
    "patientName": "Regiane Arnold",
    "fileName": "c73b860f-5467-45a8-9298-ae91ca8adb9b.document"
  },
  {
    "NewEditor": "X",
    "id": 5477049540411392,
    "patientId": 5932599805870080,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ce6u0do",
    "patientName": "Paloma Rodrigues Custódio",
    "fileName": "a8f8f917-7cc3-40b8-b904-f4178e2e9d38.document"
  },
  {
    "NewEditor": "X",
    "id": 5543547258667008,
    "patientId": 5344884320239616,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "De24cf8",
    "patientName": "Thays Manuella Pacheco",
    "fileName": "f6c930f5-48e1-4832-8c9c-b5d07c07defc.document"
  },
  {
    "NewEditor": "X",
    "id": 5618026171203584,
    "patientId": 6515099930329088,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Cetj5ig",
    "patientName": "Claudinéia Fernandes Margreiter",
    "fileName": "f9e8e449-010c-4880-94bd-b142f2a03dcc.document"
  },
  {
    "NewEditor": "X",
    "id": 5792103565492224,
    "patientId": 5196705771683840,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Cev9i7",
    "patientName": "Elenice Loch",
    "fileName": "73b67a2b-4c84-4406-8e32-4ca7218e1e6d.document"
  },
  {
    "NewEditor": "X",
    "id": 5890052555407360,
    "patientId": 5560622242201600,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ce14aao",
    "patientName": "Leticia Tomczak",
    "fileName": "dde9f2aa-8303-410b-bdc3-131c0cc07fd0.document"
  },
  {
    "NewEditor": "X",
    "id": 5896583610236928,
    "patientId": 6350853433327616,
    "documentName": "Termo Depilação a Laser ",
    "eSignatureId": "Bevuu8g",
    "patientName": "Daísa Santo",
    "fileName": "2c1da880-62e3-4be6-96f8-ced468095903.document"
  },
  {
    "NewEditor": "X",
    "id": 5909429984034816,
    "patientId": 6109762509209600,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ce8fft",
    "patientName": "Simone Maria Marcelino",
    "fileName": "da03eff0-26fe-4dbc-8f9b-20647fdbde0b.document"
  },
  {
    "NewEditor": "X",
    "id": 5910965237710848,
    "patientId": 5861654466527232,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ceurdso",
    "patientName": "Larissa Stenger",
    "fileName": "4989152b-6ee1-48c6-864c-cf27d5aab9e0.document"
  },
  {
    "NewEditor": "X",
    "id": 5947856790093824,
    "patientId": 5769321525936128,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Deg6gog",
    "patientName": "Ranyellen T. Araújo",
    "fileName": "4f9e695e-065d-4a8a-83ea-0f9ca7a9603e.document"
  },
  {
    "NewEditor": "X",
    "id": 5949815817371648,
    "patientId": 5008795709603840,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ce8fm1",
    "patientName": "Pâmela Cristina Schiestl Portel",
    "fileName": "80481d68-0387-4a0d-bf53-07116355cf34.document"
  },
  {
    "NewEditor": "X",
    "id": 5951175073857536,
    "patientId": 5912356743413760,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Cei2ivo",
    "patientName": "Bruna Silva de Abreu",
    "fileName": "92c78cb9-f057-4f1b-a45b-ed1db7fcfebe.document"
  },
  {
    "NewEditor": "X",
    "id": 6012750082211840,
    "patientId": 5905912053497856,
    "documentName": "Termo Depilação a Laser ",
    "eSignatureId": "Delvnog",
    "patientName": "Lidia Gabriela Margreiter",
    "fileName": "ff96df05-b734-48bd-b5bb-2cf159debb5a.document"
  },
  {
    "NewEditor": "X",
    "id": 6028098105901056,
    "patientId": 5692016968728576,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Cet3i5",
    "patientName": "Isabela Mariah Joly",
    "fileName": "a4c63677-3221-4b4b-a843-cf8a5da9e935.document"
  },
  {
    "NewEditor": "X",
    "id": 6030167234969600,
    "patientId": 5309762002092032,
    "documentName": "Termo Depilação a Laser ",
    "eSignatureId": "Bee3blo",
    "patientName": "Emanuely Leal Constancio",
    "fileName": "2e97085a-487e-42fb-881d-3dc055108369.document"
  },
  {
    "NewEditor": "X",
    "id": 6097526822666240,
    "patientId": 4608826376847360,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Cerb4lo",
    "patientName": "Andressa Sant'Ana Machadi Bittencourt",
    "fileName": "14fa4437-7b6b-4f14-ae7c-7aaadd3835c7.document"
  },
  {
    "NewEditor": "X",
    "id": 6121221419040768,
    "patientId": 6156492826345472,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ceo219o",
    "patientName": "Luciana Hertal da Rocha",
    "fileName": "542e34d1-4375-439f-81c3-284c1a686a5b.document"
  },
  {
    "NewEditor": "X",
    "id": 6134432909623296,
    "patientId": 6525656413896704,
    "documentName": "Termo de consentimento Toxína Botulínica",
    "eSignatureId": "Be8on1g",
    "patientName": "Nilton Adão de Brito",
    "fileName": "40df406f-b2c1-4310-a395-97cb01a8ddec.document"
  },
  {
    "NewEditor": "X",
    "id": 6154232705449984,
    "patientId": 5288409489080320,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Cefqd8g",
    "patientName": "Viviane cadore",
    "fileName": "bad9b437-e7df-4f52-82e8-b8b6b004c9b8.document"
  },
  {
    "NewEditor": "X",
    "id": 6230670191493120,
    "patientId": 5336377083953152,
    "documentName": "Preenchimento",
    "eSignatureId": "Bessq68",
    "patientName": "Gabrielly Hadassa dos Santos",
    "fileName": "b22fc50e-8838-4d56-93ce-fe4f007cb63c.document"
  },
  {
    "NewEditor": "X",
    "id": 6246727623770112,
    "patientId": 5909799904870400,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ce8s2ao",
    "patientName": "Gabriela Campestrini",
    "fileName": "76a95e69-d59c-4a00-9c70-eb4dbb2e3b80.document"
  },
  {
    "NewEditor": "X",
    "id": 6251598435450880,
    "patientId": 6107171132145664,
    "documentName": "Termo de consentimento funcionários",
    "eSignatureId": "Beltni",
    "patientName": "Yasmin carina Uller",
    "fileName": "1d299e47-9c9e-4e46-b95f-99d264b48618.document"
  },
  {
    "NewEditor": "X",
    "id": 6285645876428800,
    "patientId": 5495318489989120,
    "documentName": "Termo Depilação a Laser ",
    "eSignatureId": "Deoagao",
    "patientName": "Pamela Cristina Prestes",
    "fileName": "39b16709-552f-4faf-9c61-9de00e9a702f.document"
  },
  {
    "NewEditor": "X",
    "id": 6287130003636224,
    "patientId": 6525692452143104,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ceugoo8",
    "patientName": "Emanoelle Avila dos Anjos",
    "fileName": "0f0e1b61-fc5e-4b55-bbab-cd84891f92be.document"
  },
  {
    "NewEditor": "X",
    "id": 6304819931643904,
    "patientId": 6124930137980928,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Desk1r8",
    "patientName": "Cristina Silva Santos",
    "fileName": "75895607-c28a-4e16-98eb-cb55640f4120.document"
  },
  {
    "NewEditor": "X",
    "id": 6361758306009088,
    "patientId": 4539076992172032,
    "documentName": "Termo de consentimento funcionários",
    "eSignatureId": "Bejbldo",
    "patientName": "Luiza Passold",
    "fileName": "98292fcb-7a51-400a-a658-3da4b0addb3e.document"
  },
  {
    "NewEditor": "X",
    "id": 6384551815675904,
    "patientId": 5490323854065664,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ce1nrj",
    "patientName": "Patricia Tainara Sabino Petri",
    "fileName": "a19c601b-b697-4acb-ad21-13cc010b5c2a.document"
  },
  {
    "NewEditor": "X",
    "id": 6395416627511296,
    "patientId": 4619874755805184,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ceq4pe",
    "patientName": "Fernanda Siqueira",
    "fileName": "3eac70ea-80bd-4e82-9e21-fbdc85a3aa85.document"
  },
  {
    "NewEditor": "X",
    "id": 6396680646033408,
    "patientId": 5495318489989120,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Deiq44g",
    "patientName": "Pamela Cristina Prestes",
    "fileName": "9243a1c4-1268-41ef-8b36-b4a946dbfad6.document"
  },
  {
    "NewEditor": "X",
    "id": 6397140230602752,
    "patientId": 5550826613768192,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Cebdso",
    "patientName": "Maria Márcia Pianezzer",
    "fileName": "66d9b280-022b-443d-9333-f6faf6646b43.document"
  },
  {
    "NewEditor": "X",
    "id": 6409228973899776,
    "patientId": 4873534287773696,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Cekdkr8",
    "patientName": "Paola de Paula Rodrigues",
    "fileName": "55aaed8d-eb2b-4169-b5bd-6adfde7aef3e.document"
  },
  {
    "NewEditor": "X",
    "id": 6429926664568832,
    "patientId": 5600037816369152,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ceos6i",
    "patientName": "Luciana Cristina Miranda",
    "fileName": "358f255f-2b67-4f72-ada1-6e9e7247a284.document"
  },
  {
    "NewEditor": "X",
    "id": 6460319946113024,
    "patientId": 6564237350928384,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Cef0v4",
    "patientName": "Aline Gabriele Tolfo Tomelin",
    "fileName": "4f4f7abe-8d3a-4e84-82d7-cfb0748e0356.document"
  },
  {
    "NewEditor": "X",
    "id": 6588244464893952,
    "patientId": 4804111744237568,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ce6lmqo",
    "patientName": "Caroline Correa",
    "fileName": "a7d725dd-64d5-433c-92db-64ab73745f16.document"
  },
  {
    "NewEditor": "X",
    "id": 6589530929233920,
    "patientId": 6242843454210048,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ce5jp6g",
    "patientName": "Sheila Karpinski",
    "fileName": "34e34f2c-11a5-4e90-b9c1-9b1c1f19dd06.document"
  },
  {
    "NewEditor": "X",
    "id": 6642919436320768,
    "patientId": 5063218133598208,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Cej3bko",
    "patientName": "Kelly Paulina Schulze",
    "fileName": "abaf824b-91a1-4321-9b74-8c51e29c0535.document"
  },
  {
    "NewEditor": "X",
    "id": 6690811039580160,
    "patientId": 6123573735718912,
    "documentName": "Contrato Bellas Clínic Estética e Spa ",
    "eSignatureId": "Ceac9ag",
    "patientName": "Eric de Souza",
    "fileName": "6cd9bd45-bfc2-4fa3-9624-5e5cde6b16fd.document"
  }
]

import os
import requests

download_folder = "documentos-bellasclinic"
os.makedirs(download_folder, exist_ok=True)

total_files = len(documentList)
files_downloaded = 0

with open("token.txt", "r") as file:
        token = file.read().strip()

headers = {"Authorization": f"Bearer {token}"}

for document in documentList:
    newEditor = document.get('NewEditor') == "X"
    digitalSignature = document.get("eDigitalSignatureSigned") == "X"
    
    base_url = ""
    
    if newEditor and not digitalSignature:
        base_url = "https://solution.clinicorp.com/api/digital_certificate/view_document_with_signatures_external"
    elif digitalSignature: 
        base_url = "https://solution.clinicorp.com/api/digital_certificate/download_document"
    else:
        base_url = "https://solution.clinicorp.com/api/esignature/Doc"


    try:
        if newEditor and not digitalSignature:
            data = {"id": document['id'], "multipleSignatures": True}
            response = requests.post(base_url, json=data, headers=headers)
        elif digitalSignature:
            url = f"{base_url}?id={document['id']}"
            response = requests.get(url, headers=headers)
        else: 
            url = f"{base_url}?id={document['eSignatureId']}"
            response = requests.get(url, headers=headers)
        if response.status_code == 200:
            if newEditor or digitalSignature:
                intarray = response.json().get('data', [])
                documentName = os.path.join(download_folder, f"{document['patientName']}-{document['eSignatureId']}.pdf")

                with open(documentName, "wb") as file:
                  for i in intarray:
                    file.write(i.to_bytes(1, byteorder='big'))
            else: 
                intarray = response.content
                documentName = os.path.join(download_folder, f"{document['patientName']}-{document['eSignatureId']}.pdf")
                
                with open(documentName, "wb") as file:
                    file.write(intarray)
            files_downloaded += 1
            print(f"Download do arquivo {documentName} concluído com sucesso! ({files_downloaded}/{total_files} files downloaded)")
        else:
            print(f"Falha ao baixar o arquivo para o código {document['eSignatureId']}. Status code: {response.status_code}")

    except Exception as e:
        print(f"Erro durante a execução: {e}")

print(f"\nTodos os arquivos foram baixados. Total de arquivos: {files_downloaded}/{total_files}")

